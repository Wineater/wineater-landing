import{H as F,B as H}from"./CwQNf5LH.js";import{A as L,B as R,e as P,C as T,D as I,k as j,E as k,z as U,f as S,G as O,H as V,I as M,d as q,J as N,K as h,L as K,M as G,N as Q,_ as B,c as E,a as v,o as x,x as X,F as Y,s as J}from"./Dd9m5JKa.js";const W=e=>e==="defer"||e===!1;function Z(...e){var D;const n=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(n);let[s,c,t={}]=e;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof c!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const a=L(),l=c,y=()=>null,w=()=>a.isHydrating?a.payload.data[s]:a.static.data[s];t.server=t.server??!0,t.default=t.default??y,t.getCachedData=t.getCachedData??w,t.lazy=t.lazy??!1,t.immediate=t.immediate??!0,t.deep=t.deep??R.deep,t.dedupe=t.dedupe??"cancel";const m=()=>t.getCachedData(s,a)!=null;if(!a._asyncData[s]||!t.immediate){(D=a.payload._errors)[s]??(D[s]=null);const i=t.deep?P:T;a._asyncData[s]={data:i(t.getCachedData(s,a)??t.default()),pending:P(!m()),error:I(a.payload._errors,s),status:P("idle")}}const r={...a._asyncData[s]};r.refresh=r.execute=(i={})=>{if(a._asyncDataPromises[s]){if(W(i.dedupe??t.dedupe))return a._asyncDataPromises[s];a._asyncDataPromises[s].cancelled=!0}if((i._initial||a.isHydrating&&i._initial!==!1)&&m())return Promise.resolve(t.getCachedData(s,a));r.pending.value=!0,r.status.value="pending";const d=new Promise((u,o)=>{try{u(l(a))}catch(p){o(p)}}).then(async u=>{if(d.cancelled)return a._asyncDataPromises[s];let o=u;t.transform&&(o=await t.transform(u)),t.pick&&(o=ee(o,t.pick)),a.payload.data[s]=o,r.data.value=o,r.error.value=null,r.status.value="success"}).catch(u=>{if(d.cancelled)return a._asyncDataPromises[s];r.error.value=M(u),r.data.value=q(t.default()),r.status.value="error"}).finally(()=>{d.cancelled||(r.pending.value=!1,delete a._asyncDataPromises[s])});return a._asyncDataPromises[s]=d,a._asyncDataPromises[s]},r.clear=()=>A(a,s);const g=()=>r.refresh({_initial:!0}),b=t.server!==!1&&a.payload.serverRendered;{const i=j();if(i&&!i._nuxtOnBeforeMountCbs){i._nuxtOnBeforeMountCbs=[];const o=i._nuxtOnBeforeMountCbs;k(()=>{o.forEach(p=>{p()}),o.splice(0,o.length)}),U(()=>o.splice(0,o.length))}b&&a.isHydrating&&(r.error.value||m())?(r.pending.value=!1,r.status.value=r.error.value?"error":"success"):i&&(a.payload.serverRendered&&a.isHydrating||t.lazy)&&t.immediate?i._nuxtOnBeforeMountCbs.push(g):t.immediate&&g();const d=V();if(t.watch){const o=S(t.watch,()=>r.refresh());d&&O(o)}const u=a.hook("app:data:refresh",async o=>{(!o||o.includes(s))&&await r.refresh()});d&&O(u)}const _=Promise.resolve(a._asyncDataPromises[s]).then(()=>r);return Object.assign(_,r),_}function A(e,n){n in e.payload.data&&(e.payload.data[n]=void 0),n in e.payload._errors&&(e.payload._errors[n]=null),e._asyncData[n]&&(e._asyncData[n].data.value=void 0,e._asyncData[n].error.value=null,e._asyncData[n].pending.value=!1,e._asyncData[n].status.value="idle"),n in e._asyncDataPromises&&(e._asyncDataPromises[n].cancelled=!0,e._asyncDataPromises[n]=void 0)}function ee(e,n){const s={};for(const c of n)s[c]=e[c];return s}function ae(e,n,s){const[c={},t]=typeof n=="string"?[{},n]:[n,s],a=N(()=>h(e)),l=c.key||K([t,typeof a.value=="string"?a.value:"",...te(c)]);if(!l||typeof l!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+l);if(!e)throw new Error("[nuxt] [useFetch] request is missing.");const y=l===t?"$f"+l:l;if(!c.baseURL&&typeof a.value=="string"&&a.value[0]==="/"&&a.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:w,lazy:m,default:r,transform:g,pick:b,watch:_,immediate:D,getCachedData:i,deep:d,dedupe:u,...o}=c,p=G({...Q,...o,cache:typeof c.cache=="boolean"?void 0:c.cache}),z={server:w,lazy:m,default:r,transform:g,pick:b,immediate:D,getCachedData:i,deep:d,dedupe:u,watch:_===!1?[]:[p,a,..._||[]]};let f;return Z(y,()=>{var $;($=f==null?void 0:f.abort)==null||$.call(f),f=typeof AbortController<"u"?new AbortController:{};const C=h(c.timeout);return C&&setTimeout(()=>f.abort(),C),(c.$fetch||globalThis.$fetch)(a.value,{signal:f.signal,...p})},z)}function te(e){var s;const n=[((s=h(e.method))==null?void 0:s.toUpperCase())||"GET",h(e.baseURL)];for(const c of[e.params||e.query]){const t=h(c);if(!t)continue;const a={};for(const[l,y]of Object.entries(t))a[h(l)]=h(y);n.push(a)}return n}const se={},ne={class:"lds-ripple"};function re(e,n){return x(),E("div",ne,n[0]||(n[0]=[v("div",null,null,-1),v("div",null,null,-1)]))}const oe=B(se,[["render",re],["__scopeId","data-v-aa6ba8e6"]]),ce="https://wineater-backend.vercel.app/",ie="Y3I8Pi1FruGjVmIBqpV24PtOLYjzdROuxWX9tCXh82zjz7uUPxV3ETvHhoeiLS17";async function le(e,n){console.log(e,n);try{return(await ae(`${ce}dish/recommendations`,{method:"POST",headers:{Authorization:`Bearer ${ie}`},body:{text:e,store:n}},"$zVUsFkll1w")).data}catch(s){throw console.error("Error fetching data from API:",s),s}}const ue={components:{Preloader:oe,Button:H,Header:F},data(){return{selectedLanguage:this.$i18n.locale,supportedLocales:this.$i18n.locales,searchQuery:"",results:[],loading:!1}},created(){},methods:{searchChange(e){this.searchQuery=e.target.value},openLink(e){window.open(e,"_blank")},async handleInput(){if(!this.loading){this.loading=!0;try{const e=this.$route.query.store,n=await le(this.searchQuery,e);this.results=n,this.loading=!1}catch(e){console.error("Error in handleInput:",e)}}},clearResults(){this.results=[]}},mounted(){setTimeout(()=>{this.$refs.searchInput.focus()},100)}};function de(e,n,s,c,t,a){const l=J("Header");return x(),E(Y,null,[X(l,{"show-links":!1}),n[0]||(n[0]=v("div",{class:"playground"},[v("div",{id:"wineater-widget-conteiner"})],-1))],64)}const me=B(ue,[["render",de]]);export{me as default};
