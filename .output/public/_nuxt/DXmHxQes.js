import{B as V,H as j}from"./BIBMbjtv.js";import{M as N,j as B,N as W,O as q,P as G,L as K,Q,R as S,B as Y,S as x,b as X,T as Z,U as J,h as A,V as ee,W as ae,X as te,Y as D,_ as M,o as g,c as v,p as se,e as ne,a as o,H as T,G as I,t as h,Z as re,$ as oe,I as E,a0 as ie,d as R,F as k,r as F,v as L,a1 as le}from"./BMLoYPe0.js";const ce=e=>e==="defer"||e===!1;function de(...e){var P;const n=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(n);let[s,l,t={}]=e;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof l!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const a=Y(),u=l,_=()=>null,w=()=>a.isHydrating?a.payload.data[s]:a.static.data[s];t.server=t.server??!0,t.default=t.default??_,t.getCachedData=t.getCachedData??w,t.lazy=t.lazy??!1,t.immediate=t.immediate??!0,t.deep=t.deep??N.deep,t.dedupe=t.dedupe??"cancel";const c=()=>t.getCachedData(s,a)!=null;if(!a._asyncData[s]||!t.immediate){(P=a.payload._errors)[s]??(P[s]=null);const d=t.deep?B:W;a._asyncData[s]={data:d(t.getCachedData(s,a)??t.default()),pending:B(!c()),error:q(a.payload._errors,s),status:B("idle")}}const r={...a._asyncData[s]};r.refresh=r.execute=(d={})=>{if(a._asyncDataPromises[s]){if(ce(d.dedupe??t.dedupe))return a._asyncDataPromises[s];a._asyncDataPromises[s].cancelled=!0}if((d._initial||a.isHydrating&&d._initial!==!1)&&c())return Promise.resolve(t.getCachedData(s,a));r.pending.value=!0,r.status.value="pending";const f=new Promise((p,i)=>{try{p(u(a))}catch(b){i(b)}}).then(async p=>{if(f.cancelled)return a._asyncDataPromises[s];let i=p;t.transform&&(i=await t.transform(p)),t.pick&&(i=pe(i,t.pick)),a.payload.data[s]=i,r.data.value=i,r.error.value=null,r.status.value="success"}).catch(p=>{if(f.cancelled)return a._asyncDataPromises[s];r.error.value=x(p),r.data.value=X(t.default()),r.status.value="error"}).finally(()=>{f.cancelled||(r.pending.value=!1,delete a._asyncDataPromises[s])});return a._asyncDataPromises[s]=f,a._asyncDataPromises[s]},r.clear=()=>ue(a,s);const m=()=>r.refresh({_initial:!0}),$=t.server!==!1&&a.payload.serverRendered;{const d=Z();if(d&&!d._nuxtOnBeforeMountCbs){d._nuxtOnBeforeMountCbs=[];const i=d._nuxtOnBeforeMountCbs;G(()=>{i.forEach(b=>{b()}),i.splice(0,i.length)}),K(()=>i.splice(0,i.length))}$&&a.isHydrating&&(r.error.value||c())?(r.pending.value=!1,r.status.value=r.error.value?"error":"success"):d&&(a.payload.serverRendered&&a.isHydrating||t.lazy)&&t.immediate?d._nuxtOnBeforeMountCbs.push(m):t.immediate&&m();const f=J();if(t.watch){const i=Q(t.watch,()=>r.refresh());f&&S(i)}const p=a.hook("app:data:refresh",async i=>{(!i||i.includes(s))&&await r.refresh()});f&&S(p)}const C=Promise.resolve(a._asyncDataPromises[s]).then(()=>r);return Object.assign(C,r),C}function ue(e,n){n in e.payload.data&&(e.payload.data[n]=void 0),n in e.payload._errors&&(e.payload._errors[n]=null),e._asyncData[n]&&(e._asyncData[n].data.value=void 0,e._asyncData[n].error.value=null,e._asyncData[n].pending.value=!1,e._asyncData[n].status.value="idle"),n in e._asyncDataPromises&&(e._asyncDataPromises[n].cancelled=!0,e._asyncDataPromises[n]=void 0)}function pe(e,n){const s={};for(const l of n)s[l]=e[l];return s}function he(e,n,s){const[l={},t]=typeof n=="string"?[{},n]:[n,s],a=A(()=>D(e)),u=l.key||ee([t,typeof a.value=="string"?a.value:"",...fe(l)]);if(!u||typeof u!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+u);if(!e)throw new Error("[nuxt] [useFetch] request is missing.");const _=u===t?"$f"+u:u;if(!l.baseURL&&typeof a.value=="string"&&a.value[0]==="/"&&a.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:w,lazy:c,default:r,transform:m,pick:$,watch:C,immediate:P,getCachedData:d,deep:f,dedupe:p,...i}=l,b=ae({...te,...i,cache:typeof l.cache=="boolean"?void 0:l.cache}),U={server:w,lazy:c,default:r,transform:m,pick:$,immediate:P,getCachedData:d,deep:f,dedupe:p,watch:C===!1?[]:[b,a,...C||[]]};let y;return de(_,()=>{var H;(H=y==null?void 0:y.abort)==null||H.call(y),y=typeof AbortController<"u"?new AbortController:{};const O=D(l.timeout);return O&&setTimeout(()=>y.abort(),O),(l.$fetch||globalThis.$fetch)(a.value,{signal:y.signal,...b})},U)}function fe(e){var s;const n=[((s=D(e.method))==null?void 0:s.toUpperCase())||"GET",D(e.baseURL)];for(const l of[e.params||e.query]){const t=D(l);if(!t)continue;const a={};for(const[u,_]of Object.entries(t))a[D(u)]=D(_);n.push(a)}return n}const _e={},z=e=>(se("data-v-aa6ba8e6"),e=e(),ne(),e),ye={class:"lds-ripple"},ge=z(()=>o("div",null,null,-1)),me=z(()=>o("div",null,null,-1)),ve=[ge,me];function De(e,n){return g(),v("div",ye,ve)}const be=M(_e,[["render",De],["__scopeId","data-v-aa6ba8e6"]]),we="https://wineater-backend.vercel.app/",Ce="Y3I8Pi1FruGjVmIBqpV24PtOLYjzdROuxWX9tCXh82zjz7uUPxV3ETvHhoeiLS17";async function Pe(e,n){console.log(e,n);try{return(await he(`${we}dish/recommendations`,{method:"POST",headers:{Authorization:`Bearer ${Ce}`},body:{text:e,store:n}},"$zVUsFkll1w")).data}catch(s){throw console.error("Error fetching data from API:",s),s}}const Ie={components:{Preloader:be,Button:V,Header:j},data(){return{selectedLanguage:this.$i18n.locale,supportedLocales:this.$i18n.locales,searchQuery:"",results:[],loading:!1}},created(){},methods:{searchChange(e){this.searchQuery=e.target.value},openLink(e){window.open(e,"_blank")},async handleInput(){if(!this.loading){this.loading=!0;try{const e=this.$route.query.store,n=await Pe(this.searchQuery,e);this.results=n,this.loading=!1}catch(e){console.error("Error in handleInput:",e)}}},clearResults(){this.results=[]}},mounted(){setTimeout(()=>{this.$refs.searchInput.focus()},100)}},$e={class:"playground"},Be={class:"h2 playground__title"},Te=["innerHTML"],ke=["innerHTML"],Le={class:"p1 playground__description"},Oe={class:"playground__input"},He=o("div",{class:"playground__input-icon"},null,-1),Se=["placeholder"],Ee=o("div",{class:"playground__input-btn-icon"},null,-1),Re=[Ee],Fe={key:1,class:"playground__cards"},Me={class:"playground__card-wrapper"},ze={class:"playground__card"},Ue={class:"playground__card-title h3"},Ve={class:"playground__card-info"},je={class:"playground__card-info-header"},Ne={class:"p1"},We={class:"p2"},qe={class:"playground__card-info-grape"},Ge={class:"p1"},Ke={class:"p2"};function Qe(e,n,s,l,t,a){const u=L("Header"),_=L("Button"),w=L("Preloader");return g(),v(k,null,[T(u,{"show-links":!1}),o("div",$e,[o("h2",Be,[I(h(e.$t("playground.WineaterFind"))+" ",1),o("span",{class:"playground__title-circle",innerHTML:e.$t("playground.perfectWine")+"<br/>"},null,8,Te),I(" "+h(e.$t("playground.forYour"))+" ",1),o("span",{class:"playground__title-underline",innerHTML:e.$t("playground.perfectDinner")},null,8,ke)]),o("p",Le,h(e.$t("playground.BeSureToProvideDetails")),1),o("div",Oe,[He,o("input",{ref:"searchInput",type:"text",placeholder:e.$t("playground.WhatDoYouWannaEat"),onInput:n[0]||(n[0]=(...c)=>a.searchChange&&a.searchChange(...c)),onKeydown:n[1]||(n[1]=re(oe((...c)=>a.handleInput&&a.handleInput(...c),["prevent"]),["enter"]))},null,40,Se),T(_,{onClick:a.handleInput,disabled:!t.searchQuery,class:"playground__input-btn"},{default:E(()=>[I(h(e.$t("playground.FindAMatch")),1)]),_:1},8,["onClick","disabled"]),o("div",{onClick:n[2]||(n[2]=(...c)=>a.handleInput&&a.handleInput(...c)),class:"playground__input-btn--mobile"},Re)]),t.loading?(g(),ie(w,{key:0})):R("",!0),t.results.length&&!t.loading?(g(),v("div",Fe,[(g(!0),v(k,null,F(t.results.slice(0,3),(c,r)=>(g(),v("div",Me,[o("div",ze,[o("div",Ue,h(c.Title),1),o("div",Ve,[o("div",je,[o("p",Ne,h(e.$t("playground.Region")),1),o("p",We,h(c.Region),1)]),o("div",qe,[o("p",Ge,h(e.$t("playground.Grape")),1),o("p",Ke,[(g(!0),v(k,null,F(c.Grape.split(","),m=>(g(),v("p",null,h(m),1))),256))])]),o("div",{class:"playground__card-img",style:le({"background-image":"url("+c.Image+")"})},null,4),T(_,{onClick:m=>a.openLink(c.Url),class:"playground__card-btn"},{default:E(()=>[I(h(e.$t("playground.Buy")),1)]),_:2},1032,["onClick"])])])]))),256))])):R("",!0)])],64)}const Je=M(Ie,[["render",Qe]]);export{Je as default};
